(this["webpackJsonpsnapp.ir"]=this["webpackJsonpsnapp.ir"]||[]).push([[5],{1115:function(t,e,n){"use strict";function a(t,e){return null!=t?t:e()}n.d(e,"a",(function(){return a}))},1116:function(t,e,n){"use strict";n.r(e),n.d(e,"addExtensionMethods",(function(){return i.a})),n.d(e,"startIdleTransaction",(function(){return i.b})),n.d(e,"Integrations",(function(){return a})),n.d(e,"Span",(function(){return gt.a})),n.d(e,"spanStatusfromHttpCode",(function(){return gt.c})),n.d(e,"SpanStatus",(function(){return mt})),n.d(e,"Transaction",(function(){return bt.a})),n.d(e,"IdleTransaction",(function(){return A.c})),n.d(e,"getActiveTransaction",(function(){return I.a})),n.d(e,"hasTracingEnabled",(function(){return I.b})),n.d(e,"BROWSER_TRACING_INTEGRATION_ID",(function(){return lt})),n.d(e,"BrowserTracing",(function(){return ft})),n.d(e,"defaultRequestInstrumentationOptions",(function(){return ut})),n.d(e,"instrumentOutgoingRequests",(function(){return dt})),n.d(e,"TRACEPARENT_REGEXP",(function(){return U.a})),n.d(e,"extractTraceparentData",(function(){return U.b})),n.d(e,"stripUrlQueryAndFragment",(function(){return d.c}));var a={};n.r(a),n.d(a,"Express",(function(){return f})),n.d(a,"Postgres",(function(){return O})),n.d(a,"Mysql",(function(){return T})),n.d(a,"Mongo",(function(){return R})),n.d(a,"Prisma",(function(){return k})),n.d(a,"GraphQL",(function(){return D})),n.d(a,"Apollo",(function(){return B})),n.d(a,"BrowserTracing",(function(){return ft}));var i=n(207),r=n(11),c=n(17),o=n(20),s=n(171),u=n(21),d=n(196),_=n(3),l=n(13);n(190);function p(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.method&&t.method.toUpperCase(),a="",i="url";e.customRoute||t.route?(a=e.customRoute||"".concat(t.baseUrl||"").concat(t.route&&t.route.path),i="route"):(t.originalUrl||t.url)&&(a=Object(d.c)(t.originalUrl||t.url||""));var r="";return e.method&&n&&(r+=n),e.method&&e.path&&(r+=" "),e.path&&a&&(r+=a),[r,i]}var f=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(c.a)(this,t),t.prototype.__init.call(this),this._router=e.router||e.app,this._methods=(Array.isArray(e.methods)?e.methods:[]).concat("use")}return Object(o.a)(t,[{key:"__init",value:function(){this.name=t.id}},{key:"setupOnce",value:function(){this._router?(function(t){(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).forEach((function(e){return g(t,e)}))}(this._router,this._methods),function(t){var e="settings"in t;e&&void 0===t._router&&t.lazyrouter&&t.lazyrouter();var n=e?t._router:t;if(!n)return("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&u.c.debug("Cannot instrument router for URL Parameterization (did not find a valid router)."),void(("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&u.c.debug("Routing instrumentation is currently only supported in Express 4."));var a=Object.getPrototypeOf(n),i=a.process_params;a.process_params=function(t,e,n,a,c){n._reconstructedRoute||(n._reconstructedRoute="");var o=function(t){var e=Object(s.a)([t,"access",function(t){return t.route},"optionalAccess",function(t){return t.path}]),n=Object(l.k)(e),a=Array.isArray(e);if(!e)return{isRegex:n,isArray:a,numExtraSegments:0};var i=a?Math.max((r=e,r.reduce((function(t,e){return t+Object(d.a)(e.toString())}),0)-Object(d.a)(t.path||"")),0):0;var r;return{layerRoutePath:b(a,e),isRegex:n,isArray:a,numExtraSegments:i}}(t),u=o.layerRoutePath,_=o.isRegex,f=o.isArray,h=o.numExtraSegments,m=(u||t.path||"").split("/").filter((function(t){return t.length>0&&(_||f||!t.includes("*"))})).join("/");if(m&&m.length>0&&(n._reconstructedRoute+="/".concat(m).concat(_?"/":"")),Object(d.a)(n.originalUrl||"")+h===Object(d.a)(n._reconstructedRoute)){var g=a.__sentry_transaction;if(g&&"custom"!==g.metadata.source){var v=n._reconstructedRoute||"/";g.setName.apply(g,Object(r.a)(p(n,{path:!0,method:!0,customRoute:v})))}}return i.call(this,t,e,n,a,c)}}(this._router)):("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&u.c.error("ExpressIntegration is missing an Express instance")}}],[{key:"__initStatic",value:function(){this.id="Express"}}]),t}();function h(t,e){var n=t.length;switch(n){case 2:return function(n,a){var i=a.__sentry_transaction;if(i){var r=i.startChild({description:t.name,op:"express.middleware.".concat(e)});a.once("finish",(function(){r.finish()}))}return t.call(this,n,a)};case 3:return function(n,a,i){var r=a.__sentry_transaction,c=Object(s.a)([r,"optionalAccess",function(t){return t.startChild},"call",function(n){return n({description:t.name,op:"express.middleware.".concat(e)})}]);t.call(this,n,a,(function(){Object(s.a)([c,"optionalAccess",function(t){return t.finish},"call",function(t){return t()}]);for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];i.call.apply(i,[this].concat(e))}))};case 4:return function(n,a,i,r){var c=i.__sentry_transaction,o=Object(s.a)([c,"optionalAccess",function(t){return t.startChild},"call",function(n){return n({description:t.name,op:"express.middleware.".concat(e)})}]);t.call(this,n,a,i,(function(){Object(s.a)([o,"optionalAccess",function(t){return t.finish},"call",function(t){return t()}]);for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];r.call.apply(r,[this].concat(e))}))};default:throw new Error("Express middleware takes 2-4 arguments. Got: ".concat(n))}}function m(t,e){return t.map((function(t){return"function"===typeof t?h(t,e):Array.isArray(t)?t.map((function(t){return"function"===typeof t?h(t,e):t})):t}))}function g(t,e){var n=t[e];return t[e]=function(){for(var t=arguments.length,a=new Array(t),i=0;i<t;i++)a[i]=arguments[i];return n.call.apply(n,[this].concat(Object(r.a)(m(a,e))))},t}function b(t,e){return t?e.map((function(t){return t.toString()})).join(","):e&&e.toString()}f.__initStatic();var v=n(79),y=n(23),O=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(c.a)(this,t),t.prototype.__init.call(this),this._usePgNative=!!e.usePgNative}return Object(o.a)(t,[{key:"__init",value:function(){this.name=t.id}},{key:"setupOnce",value:function(t,e){var n=Object(v.c)("pg");if(n)if(!this._usePgNative||Object(s.a)([n,"access",function(t){return t.native},"optionalAccess",function(t){return t.Client}])){var a=(this._usePgNative?n.native:n).Client;Object(y.e)(a.prototype,"query",(function(t){return function(n,a,i){var r=e().getScope(),c=Object(s.a)([r,"optionalAccess",function(t){return t.getSpan},"call",function(t){return t()}]),o=Object(s.a)([c,"optionalAccess",function(t){return t.startChild},"call",function(t){return t({description:"string"===typeof n?n:n.text,op:"db"})}]);if("function"===typeof i)return t.call(this,n,a,(function(t,e){Object(s.a)([o,"optionalAccess",function(t){return t.finish},"call",function(t){return t()}]),i(t,e)}));if("function"===typeof a)return t.call(this,n,(function(t,e){Object(s.a)([o,"optionalAccess",function(t){return t.finish},"call",function(t){return t()}]),a(t,e)}));var u="undefined"!==typeof a?t.call(this,n,a):t.call(this,n);return Object(l.n)(u)?u.then((function(t){return Object(s.a)([o,"optionalAccess",function(t){return t.finish},"call",function(t){return t()}]),t})):(Object(s.a)([o,"optionalAccess",function(t){return t.finish},"call",function(t){return t()}]),u)}}))}else("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&u.c.error("Postgres Integration was unable to access 'pg-native' bindings.");else("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&u.c.error("Postgres Integration was unable to require `pg` package.")}}],[{key:"__initStatic",value:function(){this.id="Postgres"}}]),t}();O.__initStatic();var T=function(){function t(){Object(c.a)(this,t),t.prototype.__init.call(this)}return Object(o.a)(t,[{key:"__init",value:function(){this.name=t.id}},{key:"setupOnce",value:function(t,e){var n=Object(v.c)("mysql/lib/Connection.js");n?Object(y.e)(n,"createQuery",(function(t){return function(n,a,i){var r=e().getScope(),c=Object(s.a)([r,"optionalAccess",function(t){return t.getSpan},"call",function(t){return t()}]),o=Object(s.a)([c,"optionalAccess",function(t){return t.startChild},"call",function(t){return t({description:"string"===typeof n?n:n.sql,op:"db"})}]);return"function"===typeof i?t.call(this,n,a,(function(t,e,n){Object(s.a)([o,"optionalAccess",function(t){return t.finish},"call",function(t){return t()}]),i(t,e,n)})):"function"===typeof a?t.call(this,n,(function(t,e,n){Object(s.a)([o,"optionalAccess",function(t){return t.finish},"call",function(t){return t()}]),a(t,e,n)})):t.call(this,n,a,i)}})):("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&u.c.error("Mysql Integration was unable to require `mysql` package.")}}],[{key:"__initStatic",value:function(){this.id="Mysql"}}]),t}();T.__initStatic();var E=n(4),S=["aggregate","bulkWrite","countDocuments","createIndex","createIndexes","deleteMany","deleteOne","distinct","drop","dropIndex","dropIndexes","estimatedDocumentCount","find","findOne","findOneAndDelete","findOneAndReplace","findOneAndUpdate","indexes","indexExists","indexInformation","initializeOrderedBulkOp","insertMany","insertOne","isCapped","mapReduce","options","parallelCollectionScan","rename","replaceOne","stats","updateMany","updateOne"],j={bulkWrite:["operations"],countDocuments:["query"],createIndex:["fieldOrSpec"],createIndexes:["indexSpecs"],deleteMany:["filter"],deleteOne:["filter"],distinct:["key","query"],dropIndex:["indexName"],find:["query"],findOne:["query"],findOneAndDelete:["filter"],findOneAndReplace:["filter","replacement"],findOneAndUpdate:["filter","update"],indexExists:["indexes"],insertMany:["docs"],insertOne:["doc"],mapReduce:["map","reduce"],rename:["newName"],replaceOne:["filter","doc"],updateMany:["filter","update"],updateOne:["filter","update"]},R=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(c.a)(this,t),t.prototype.__init.call(this),this._operations=Array.isArray(e.operations)?e.operations:S,this._describeOperations=!("describeOperations"in e)||e.describeOperations,this._useMongoose=!!e.useMongoose}return Object(o.a)(t,[{key:"__init",value:function(){this.name=t.id}},{key:"setupOnce",value:function(t,e){var n=this._useMongoose?"mongoose":"mongodb",a=Object(v.c)(n);a?this._instrumentOperations(a.Collection,this._operations,e):("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&u.c.error("Mongo Integration was unable to require `".concat(n,"` package."))}},{key:"_instrumentOperations",value:function(t,e,n){var a=this;e.forEach((function(e){return a._patchOperation(t,e,n)}))}},{key:"_patchOperation",value:function(t,e,n){if(e in t.prototype){var a=this._getSpanContextFromOperationArguments.bind(this);Object(y.e)(t.prototype,e,(function(t){return function(){for(var i=this,c=arguments.length,o=new Array(c),u=0;u<c;u++)o[u]=arguments[u];var d=o[o.length-1],_=n().getScope(),p=Object(s.a)([_,"optionalAccess",function(t){return t.getSpan},"call",function(t){return t()}]);if("function"!==typeof d||"mapReduce"===e&&2===o.length){var f=Object(s.a)([p,"optionalAccess",function(t){return t.startChild},"call",function(t){return t(a(i,e,o))}]),h=t.call.apply(t,[this].concat(o));return Object(l.n)(h)?h.then((function(t){return Object(s.a)([f,"optionalAccess",function(t){return t.finish},"call",function(t){return t()}]),t})):(Object(s.a)([f,"optionalAccess",function(t){return t.finish},"call",function(t){return t()}]),h)}f=Object(s.a)([p,"optionalAccess",function(t){return t.startChild},"call",function(t){return t(a(i,e,o.slice(0,-1)))}]);return t.call.apply(t,[this].concat(Object(r.a)(o.slice(0,-1)),[function(t,e){Object(s.a)([f,"optionalAccess",function(t){return t.finish},"call",function(t){return t()}]),d(t,e)}]))}}))}}},{key:"_getSpanContextFromOperationArguments",value:function(t,e,n){var a={collectionName:t.collectionName,dbName:t.dbName,namespace:t.namespace},i={op:"db",description:e,data:a},r=j[e],c=Array.isArray(this._describeOperations)?this._describeOperations.includes(e):this._describeOperations;if(!r||!c)return i;try{if("mapReduce"===e){var o=Object(E.a)(n,2),s=o[0],u=o[1];a[r[0]]="string"===typeof s?s:s.name||"<anonymous>",a[r[1]]="string"===typeof u?u:u.name||"<anonymous>"}else for(var d=0;d<r.length;d++)a[r[d]]=JSON.stringify(n[d])}catch(_){}return i}}],[{key:"__initStatic",value:function(){this.id="Mongo"}}]),t}();function N(t){return t&&!!t.$use}R.__initStatic();var k=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(c.a)(this,t),t.prototype.__init.call(this),N(e.client)?this._client=e.client:("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&u.c.warn("Unsupported Prisma client provided to PrismaIntegration. Provided client: ".concat(JSON.stringify(e.client)))}return Object(o.a)(t,[{key:"__init",value:function(){this.name=t.id}},{key:"setupOnce",value:function(t,e){this._client?this._client.$use((function(t,n){var a=e().getScope(),i=Object(s.a)([a,"optionalAccess",function(t){return t.getSpan},"call",function(t){return t()}]),r=t.action,c=t.model,o=Object(s.a)([i,"optionalAccess",function(t){return t.startChild},"call",function(t){return t({description:c?"".concat(c," ").concat(r):r,op:"db.prisma"})}]),u=n(t);return Object(l.n)(u)?u.then((function(t){return Object(s.a)([o,"optionalAccess",function(t){return t.finish},"call",function(t){return t()}]),t})):(Object(s.a)([o,"optionalAccess",function(t){return t.finish},"call",function(t){return t()}]),u)})):("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&u.c.error("PrismaIntegration is missing a Prisma Client Instance")}}],[{key:"__initStatic",value:function(){this.id="Prisma"}}]),t}();k.__initStatic();var D=function(){function t(){Object(c.a)(this,t),t.prototype.__init.call(this)}return Object(o.a)(t,[{key:"__init",value:function(){this.name=t.id}},{key:"setupOnce",value:function(t,e){var n=Object(v.c)("graphql/execution/execute.js");n?Object(y.e)(n,"execute",(function(t){return function(){var n=e().getScope(),a=Object(s.a)([n,"optionalAccess",function(t){return t.getSpan},"call",function(t){return t()}]),i=Object(s.a)([a,"optionalAccess",function(t){return t.startChild},"call",function(t){return t({description:"execute",op:"db.graphql"})}]);Object(s.a)([n,"optionalAccess",function(t){return t.setSpan},"call",function(t){return t(i)}]);for(var r=arguments.length,c=new Array(r),o=0;o<r;o++)c[o]=arguments[o];var u=t.call.apply(t,[this].concat(c));return Object(l.n)(u)?u.then((function(t){return Object(s.a)([i,"optionalAccess",function(t){return t.finish},"call",function(t){return t()}]),Object(s.a)([n,"optionalAccess",function(t){return t.setSpan},"call",function(t){return t(a)}]),t})):(Object(s.a)([i,"optionalAccess",function(t){return t.finish},"call",function(t){return t()}]),Object(s.a)([n,"optionalAccess",function(t){return t.setSpan},"call",function(t){return t(a)}]),u)}})):u.c.error("GraphQL Integration was unable to require graphql/execution package.")}}],[{key:"__initStatic",value:function(){this.id="GraphQL"}}]),t}();D.__initStatic();var B=function(){function t(){Object(c.a)(this,t),t.prototype.__init.call(this)}return Object(o.a)(t,[{key:"__init",value:function(){this.name=t.id}},{key:"setupOnce",value:function(t,e){var n=Object(v.c)("apollo-server-core");n?Object(y.e)(n.ApolloServerBase.prototype,"constructSchema",(function(t){return function(){var n=Array.isArray(this.config.resolvers)?this.config.resolvers:[this.config.resolvers];return this.config.resolvers=n.map((function(t){return Object.keys(t).forEach((function(n){Object.keys(t[n]).forEach((function(a){"function"===typeof t[n][a]&&function(t,e,n,a){Object(y.e)(t[e],n,(function(t){return function(){for(var i=a().getScope(),r=Object(s.a)([i,"optionalAccess",function(t){return t.getSpan},"call",function(t){return t()}]),c=Object(s.a)([r,"optionalAccess",function(t){return t.startChild},"call",function(t){return t({description:"".concat(e,".").concat(n),op:"db.graphql.apollo"})}]),o=arguments.length,u=new Array(o),d=0;d<o;d++)u[d]=arguments[d];var _=t.call.apply(t,[this].concat(u));return Object(l.n)(_)?_.then((function(t){return Object(s.a)([c,"optionalAccess",function(t){return t.finish},"call",function(t){return t()}]),t})):(Object(s.a)([c,"optionalAccess",function(t){return t.finish},"call",function(t){return t()}]),_)}}))}(t,n,a,e)}))})),t})),t.call(this)}})):u.c.error("Apollo Integration was unable to require apollo-server-core package.")}}],[{key:"__initStatic",value:function(){this.id="Apollo"}}]),t}();B.__initStatic();var G=n(24),U=n(215),Y=n(201),A=n(210),I=n(204),x=Object(G.a)();var C=n(1115),w=n(80),M=n(111),q=function(t,e,n){var a;return function(i){e.value>=0&&(i||n)&&(e.delta=e.value-(a||0),(e.delta||void 0===a)&&(a=e.value,t(e)))}},P=function(t,e){return{name:t,value:Object(C.a)(e,(function(){return-1})),delta:0,entries:[],id:"v2-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12)}},H=function(t,e){try{if(PerformanceObserver.supportedEntryTypes.includes(t)){if("first-input"===t&&!("PerformanceEventTiming"in self))return;var n=new PerformanceObserver((function(t){return t.getEntries().map(e)}));return n.observe({type:t,buffered:!0}),n}}catch(a){}},L=function(t,e){var n=function n(a){"pagehide"!==a.type&&"hidden"!==Object(G.a)().document.visibilityState||(t(a),e&&(removeEventListener("visibilitychange",n,!0),removeEventListener("pagehide",n,!0)))};addEventListener("visibilitychange",n,!0),addEventListener("pagehide",n,!0)},F=-1,z=function(){return F<0&&(F="hidden"===Object(G.a)().document.visibilityState?0:1/0,L((function(t){var e=t.timeStamp;F=e}),!0)),{get firstHiddenTime(){return F}}},W={},J=n(8);function Q(t){return"number"===typeof t&&isFinite(t)}function X(t,e){var n=e.startTimestamp,a=Object(J.a)(e,["startTimestamp"]);return n&&t.startTimestamp>n&&(t.startTimestamp=n),t.startChild(Object(_.a)({startTimestamp:n},a))}var $=Object(G.a)();function V(){return $&&$.addEventListener&&$.performance}var K,Z,tt=0,et={};function nt(){!function(t,e){var n,a=P("CLS",0),i=0,r=[],c=function(t){if(t&&!t.hadRecentInput){var e=r[0],c=r[r.length-1];i&&0!==r.length&&t.startTime-c.startTime<1e3&&t.startTime-e.startTime<5e3?(i+=t.value,r.push(t)):(i=t.value,r=[t]),i>a.value&&(a.value=i,a.entries=r,n&&n())}},o=H("layout-shift",c);o&&(n=q(t,a,e),L((function(){o.takeRecords().map(c),n(!0)})))}((function(t){var e=t.entries.pop();e&&(("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&u.c.log("[Measurements] Adding CLS"),et.cls={value:t.value,unit:""},Z=e)}))}function at(t){!function(t,e){var n,a=z(),i=P("LCP"),r=function(t){var e=t.startTime;e<a.firstHiddenTime&&(i.value=e,i.entries.push(t)),n&&n()},c=H("largest-contentful-paint",r);if(c){n=q(t,i,e);var o=function(){W[i.id]||(c.takeRecords().map(r),c.disconnect(),W[i.id]=!0,n(!0))};["keydown","click"].forEach((function(t){addEventListener(t,o,{once:!0,capture:!0})})),L(o,!0)}}((function(t){var e=t.entries.pop();if(e){var n=Object(I.c)(w.a),a=Object(I.c)(e.startTime);("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&u.c.log("[Measurements] Adding LCP"),et.lcp={value:t.value,unit:"millisecond"},et["mark.lcp"]={value:n+a,unit:"second"},K=e}}),t)}function it(){!function(t,e){var n,a=z(),i=P("FID"),r=function(t){n&&t.startTime<a.firstHiddenTime&&(i.value=t.processingStart-t.startTime,i.entries.push(t),n(!0))},c=H("first-input",r);c&&(n=q(t,i,e),L((function(){c.takeRecords().map(r),c.disconnect()}),!0))}((function(t){var e=t.entries.pop();if(e){var n=Object(I.c)(w.a),a=Object(I.c)(e.startTime);("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&u.c.log("[Measurements] Adding FID"),et.fid={value:t.value,unit:"millisecond"},et["mark.fid"]={value:n+a,unit:"second"}}}))}function rt(t){var e=V();if(e&&$.performance.getEntries&&w.a){("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&u.c.log("[Tracing] Adding & adjusting spans using Performance API");var n,a,i=Object(I.c)(w.a),r=e.getEntries();r.slice(tt).forEach((function(e){var r=Object(I.c)(e.startTime),c=Object(I.c)(e.duration);if(!("navigation"===t.op&&i+r<t.startTimestamp))switch(e.entryType){case"navigation":!function(t,e,n){["unloadEvent","redirect","domContentLoadedEvent","loadEvent","connect"].forEach((function(a){ct(t,e,a,n)})),ct(t,e,"secureConnection",n,"TLS/SSL","connectEnd"),ct(t,e,"fetch",n,"cache","domainLookupStart"),ct(t,e,"domainLookup",n,"DNS"),function(t,e,n){X(t,{op:"browser",description:"request",startTimestamp:n+Object(I.c)(e.requestStart),endTimestamp:n+Object(I.c)(e.responseEnd)}),X(t,{op:"browser",description:"response",startTimestamp:n+Object(I.c)(e.responseStart),endTimestamp:n+Object(I.c)(e.responseEnd)})}(t,e,n)}(t,e,i),n=i+Object(I.c)(e.responseStart),a=i+Object(I.c)(e.requestStart);break;case"mark":case"paint":case"measure":var o=function(t,e,n,a,i){var r=i+n,c=r+a;return X(t,{description:e.name,endTimestamp:c,op:e.entryType,startTimestamp:r}),r}(t,e,r,c,i),s=z(),d=e.startTime<s.firstHiddenTime;"first-paint"===e.name&&d&&(("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&u.c.log("[Measurements] Adding FP"),et.fp={value:e.startTime,unit:"millisecond"},et["mark.fp"]={value:o,unit:"second"}),"first-contentful-paint"===e.name&&d&&(("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&u.c.log("[Measurements] Adding FCP"),et.fcp={value:e.startTime,unit:"millisecond"},et["mark.fcp"]={value:o,unit:"second"});break;case"resource":var _=e.name.replace($.location.origin,"");!function(t,e,n,a,i,r){if("xmlhttprequest"===e.initiatorType||"fetch"===e.initiatorType)return;var c={};"transferSize"in e&&(c["Transfer Size"]=e.transferSize);"encodedBodySize"in e&&(c["Encoded Body Size"]=e.encodedBodySize);"decodedBodySize"in e&&(c["Decoded Body Size"]=e.decodedBodySize);var o=r+a;X(t,{description:n,endTimestamp:o+i,op:e.initiatorType?"resource.".concat(e.initiatorType):"resource",startTimestamp:o,data:c})}(t,e,_,r,c,i)}})),tt=Math.max(r.length-1,0),function(t){var e=$.navigator;if(!e)return;var n=e.connection;n&&(n.effectiveType&&t.setTag("effectiveConnectionType",n.effectiveType),n.type&&t.setTag("connectionType",n.type),Q(n.rtt)&&(et["connection.rtt"]={value:n.rtt,unit:"millisecond"}),Q(n.downlink)&&(et["connection.downlink"]={value:n.downlink,unit:""}));Q(e.deviceMemory)&&t.setTag("deviceMemory","".concat(e.deviceMemory," GB"));Q(e.hardwareConcurrency)&&t.setTag("hardwareConcurrency",String(e.hardwareConcurrency))}(t),"pageload"===t.op&&("number"===typeof n&&(("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&u.c.log("[Measurements] Adding TTFB"),et.ttfb={value:1e3*(n-t.startTimestamp),unit:"millisecond"},"number"===typeof a&&a<=n&&(et["ttfb.requestTime"]={value:1e3*(n-a),unit:"millisecond"})),["fcp","fp","lcp"].forEach((function(e){if(et[e]&&!(i>=t.startTimestamp)){var n=et[e].value,a=i+Object(I.c)(n),r=Math.abs(1e3*(a-t.startTimestamp)),c=r-n;("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&u.c.log("[Measurements] Normalized ".concat(e," from ").concat(n," to ").concat(r," (").concat(c,")")),et[e].value=r}})),et["mark.fid"]&&et.fid&&X(t,{description:"first input delay",endTimestamp:et["mark.fid"].value+Object(I.c)(et.fid.value),op:"web.vitals",startTimestamp:et["mark.fid"].value}),"fcp"in et||delete et.cls,Object.keys(et).forEach((function(e){t.setMeasurement(e,et[e].value,et[e].unit)})),function(t){K&&(("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&u.c.log("[Measurements] Adding LCP Data"),K.element&&t.setTag("lcp.element",Object(M.b)(K.element)),K.id&&t.setTag("lcp.id",K.id),K.url&&t.setTag("lcp.url",K.url.trim().slice(0,200)),t.setTag("lcp.size",K.size));Z&&Z.sources&&(("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&u.c.log("[Measurements] Adding CLS Data"),Z.sources.forEach((function(e,n){return t.setTag("cls.source.".concat(n+1),Object(M.b)(e.node))})))}(t)),K=void 0,Z=void 0,et={}}}function ct(t,e,n,a,i,r){var c=r?e[r]:e["".concat(n,"End")],o=e["".concat(n,"Start")];o&&c&&X(t,{op:"browser",description:Object(C.a)(i,(function(){return n})),startTimestamp:a+Object(I.c)(o),endTimestamp:a+Object(I.c)(c)})}var ot=n(58),st=n(113),ut={traceFetch:!0,traceXHR:!0,tracingOrigins:["localhost",/^\//]};function dt(t){var e=Object(_.a)(Object(_.a)({},ut),t),n=e.traceFetch,a=e.traceXHR,i=e.tracingOrigins,c=e.shouldCreateSpanForRequest,o={},s=function(t){if(o[t])return o[t];var e=i;return o[t]=e.some((function(e){return Object(ot.a)(t,e)}))&&!Object(ot.a)(t,"sentry_key"),o[t]},u=s;"function"===typeof c&&(u=function(t){return s(t)&&c(t)});var d={};n&&Object(st.a)("fetch",(function(t){!function(t,e,n){if(!Object(I.b)()||!t.fetchData||!e(t.fetchData.url))return;if(t.endTimestamp){var a=t.fetchData.__span;if(!a)return;return void((c=n[a])&&(t.response?c.setHttpStatus(t.response.status):t.error&&c.setStatus("internal_error"),c.finish(),delete n[a]))}var i=Object(I.a)();if(i){var c=i.startChild({data:Object(_.a)(Object(_.a)({},t.fetchData),{},{type:"fetch"}),description:"".concat(t.fetchData.method," ").concat(t.fetchData.url),op:"http.client"});t.fetchData.__span=c.spanId,n[c.spanId]=c;var o=t.args[0]=t.args[0],s=t.args[1]=t.args[1]||{};s.headers=function(t,e,n,a){var i=a.headers;Object(l.g)(t,Request)&&(i=t.headers);if(i)if("function"===typeof i.append)i.append("sentry-trace",n.toTraceparent()),i.append(Y.a,Object(Y.e)(e,i.get(Y.a)));else if(Array.isArray(i)){var c=i.find((function(t){var e=Object(E.a)(t,2),n=e[0];e[1];return n===Y.a})),o=Object(E.a)(c,2)[1];i=[].concat(Object(r.a)(i),[["sentry-trace",n.toTraceparent()],[Y.a,Object(Y.e)(e,o)]])}else i=Object(_.a)(Object(_.a)({},i),{},{"sentry-trace":n.toTraceparent(),baggage:Object(Y.e)(e,i.baggage)});else i={"sentry-trace":n.toTraceparent(),baggage:Object(Y.e)(e)};return i}(o,i.getBaggage(),c,s)}}(t,u,d)})),a&&Object(st.a)("xhr",(function(t){!function(t,e,n){if(!Object(I.b)()||t.xhr&&t.xhr.__sentry_own_request__||!(t.xhr&&t.xhr.__sentry_xhr__&&e(t.xhr.__sentry_xhr__.url)))return;var a=t.xhr.__sentry_xhr__;if(t.endTimestamp){var i=t.xhr.__sentry_xhr_span_id__;if(!i)return;return void((c=n[i])&&(c.setHttpStatus(a.status_code),c.finish(),delete n[i]))}var r=Object(I.a)();if(r){var c=r.startChild({data:Object(_.a)(Object(_.a)({},a.data),{},{type:"xhr",method:a.method,url:a.url}),description:"".concat(a.method," ").concat(a.url),op:"http.client"});if(t.xhr.__sentry_xhr_span_id__=c.spanId,n[t.xhr.__sentry_xhr_span_id__]=c,t.xhr.setRequestHeader)try{t.xhr.setRequestHeader("sentry-trace",c.toTraceparent());var o=t.xhr.getRequestHeader&&t.xhr.getRequestHeader(Y.a);t.xhr.setRequestHeader(Y.a,Object(Y.e)(r.getBaggage(),o))}catch(s){}}}(t,u,d)}))}var _t=Object(G.a)();var lt="BrowserTracing",pt=Object(_.a)({idleTimeout:A.b,finalTimeout:A.a,markBackgroundTransactions:!0,routingInstrumentation:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(_t&&_t.location){var a,i=_t.location.href;e&&(a=t({name:_t.location.pathname,op:"pageload",metadata:{source:"url"}})),n&&Object(st.a)("history",(function(e){var n=e.to,r=e.from;void 0===r&&i&&-1!==i.indexOf(n)?i=void 0:r!==n&&(i=void 0,a&&(("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&u.c.log("[Tracing] Finishing current transaction with op: ".concat(a.op)),a.finish()),a=t({name:_t.location.pathname,op:"navigation",metadata:{source:"url"}}))}))}else("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&u.c.warn("Could not initialize routing instrumentation due to invalid location")},startTransactionOnLocationChange:!0,startTransactionOnPageLoad:!0,_experiments:{enableLongTask:!0}},ut),ft=function(){function t(e){Object(c.a)(this,t),t.prototype.__init.call(this);var n=ut.tracingOrigins;e&&(e.tracingOrigins&&Array.isArray(e.tracingOrigins)?n=e.tracingOrigins:("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&(this._emitOptionsWarning=!0)),this.options=Object(_.a)(Object(_.a)(Object(_.a)({},pt),e),{},{tracingOrigins:n});var a=this.options._metricOptions;!function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=V();e&&w.a&&(e.mark&&$.performance.mark("sentry-tracing-init"),nt(),at(t),it())}(a&&a._reportAllChanges),Object(s.a)([this,"access",function(t){return t.options},"access",function(t){return t._experiments},"optionalAccess",function(t){return t.enableLongTask}])&&H("longtask",(function(t){var e=Object(I.a)();if(e){var n=Object(I.c)(w.a+t.startTime),a=Object(I.c)(t.duration);e.startChild({description:"Long Task",op:"ui.long-task",startTimestamp:n,endTimestamp:n+a})}}))}return Object(o.a)(t,[{key:"__init",value:function(){this.name=lt}},{key:"setupOnce",value:function(t,e){var n=this;this._getCurrentHub=e,this._emitOptionsWarning&&(("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&u.c.warn("[Tracing] You need to define `tracingOrigins` in the options. Set an array of urls or patterns to trace."),("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&u.c.warn("[Tracing] We added a reasonable default for you: ".concat(ut.tracingOrigins)));var a=this.options,i=a.routingInstrumentation,r=a.startTransactionOnLocationChange,c=a.startTransactionOnPageLoad,o=a.markBackgroundTransactions,s=a.traceFetch,d=a.traceXHR,_=a.tracingOrigins,l=a.shouldCreateSpanForRequest;i((function(t){return n._createRouteTransaction(t)}),c,r),o&&(x&&x.document?x.document.addEventListener("visibilitychange",(function(){var t=Object(I.a)();if(x.document.hidden&&t){var e="cancelled";("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&u.c.log("[Tracing] Transaction: ".concat(e," -> since tab moved to the background, op: ").concat(t.op)),t.status||t.setStatus(e),t.setTag("visibilitychange","document.hidden"),t.finish()}})):("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&u.c.warn("[Tracing] Could not set up background tab detection due to lack of global document")),dt({traceFetch:s,traceXHR:d,tracingOrigins:_,shouldCreateSpanForRequest:l})}},{key:"_createRouteTransaction",value:function(t){var e=this;if(this._getCurrentHub){var n=this.options,a=n.beforeNavigate,r=n.idleTimeout,c=n.finalTimeout,o="pageload"===t.op?function(){var t=ht("sentry-trace"),e=ht("baggage"),n=t?Object(U.b)(t):void 0,a=Object(Y.f)(e,t);if(n||a)return Object(_.a)(Object(_.a)({},n&&n),a&&{metadata:{baggage:a}});return}():void 0,s=Object(_.a)(Object(_.a)(Object(_.a)(Object(_.a)({},t),o),o&&{metadata:Object(_.a)(Object(_.a)({},t.metadata),o.metadata)}),{},{trimEnd:!0}),d="function"===typeof a?a(s):s,l=void 0===d?Object(_.a)(Object(_.a)({},s),{},{sampled:!1}):d;l.metadata=l.name!==s.name?Object(_.a)(Object(_.a)({},l.metadata),{},{source:"custom"}):l.metadata,!1===l.sampled&&("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&u.c.log("[Tracing] Will not send ".concat(l.op," transaction because of beforeNavigate.")),("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&u.c.log("[Tracing] Starting ".concat(l.op," transaction on scope"));var p=this._getCurrentHub(),f=Object(G.a)().location,h=Object(i.b)(p,l,r,c,!0,{location:f});return h.registerBeforeFinishCallback((function(t){rt(t),t.setTag("sentry_reportAllChanges",Boolean(e.options._metricOptions&&e.options._metricOptions._reportAllChanges))})),h}("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&u.c.warn("[Tracing] Did not create ".concat(t.op," transaction because _getCurrentHub is invalid."))}}]),t}();function ht(t){var e=Object(G.a)();if(e.document&&e.document.querySelector){var n=e.document.querySelector("meta[name=".concat(t,"]"));return n?n.getAttribute("content"):null}return null}var mt,gt=n(208);!function(t){t.Ok="ok";t.DeadlineExceeded="deadline_exceeded";t.Unauthenticated="unauthenticated";t.PermissionDenied="permission_denied";t.NotFound="not_found";t.ResourceExhausted="resource_exhausted";t.InvalidArgument="invalid_argument";t.Unimplemented="unimplemented";t.Unavailable="unavailable";t.InternalError="internal_error";t.UnknownError="unknown_error";t.Cancelled="cancelled";t.AlreadyExists="already_exists";t.FailedPrecondition="failed_precondition";t.Aborted="aborted";t.OutOfRange="out_of_range";t.DataLoss="data_loss"}(mt||(mt={}));var bt=n(209);("undefined"===typeof __SENTRY_TRACING__||__SENTRY_TRACING__)&&Object(i.a)()},204:function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return c}));var a=n(27);function i(t){var e=Object(a.b)().getClient(),n=t||e&&e.getOptions();return!!n&&("tracesSampleRate"in n||"tracesSampler"in n)}function r(t){var e=(t||Object(a.b)()).getScope();return e&&e.getTransaction()}function c(t){return t/1e3}},207:function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return g})),n.d(e,"b",(function(){return m}));var a=n(11),i=n(3),r=n(27),c=n(21),o=n(13),s=n(79),u=n(657),d=n(210),_=n(209),l=n(204);function p(){var t=this.getScope();if(t){var e=t.getSpan();if(e)return{"sentry-trace":e.toTraceparent()}}return{}}function f(t,e,n){return Object(l.b)(e)?void 0!==t.sampled?(t.setMetadata({transactionSampling:{method:"explicitly_set"}}),t):("function"===typeof e.tracesSampler?(a=e.tracesSampler(n),t.setMetadata({transactionSampling:{method:"client_sampler",rate:Number(a)}})):void 0!==n.parentSampled?(a=n.parentSampled,t.setMetadata({transactionSampling:{method:"inheritance"}})):(a=e.tracesSampleRate,t.setMetadata({transactionSampling:{method:"client_rate",rate:Number(a)}})),function(t){if(Object(o.h)(t)||"number"!==typeof t&&"boolean"!==typeof t)return("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&c.c.warn("[Tracing] Given sample rate is invalid. Sample rate must be a boolean or a number between 0 and 1. Got ".concat(JSON.stringify(t)," of type ").concat(JSON.stringify(typeof t),".")),!1;if(t<0||t>1)return("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&c.c.warn("[Tracing] Given sample rate is invalid. Sample rate must be between 0 and 1. Got ".concat(t,".")),!1;return!0}(a)?a?(t.sampled=Math.random()<a,t.sampled?(("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&c.c.log("[Tracing] starting ".concat(t.op," transaction - ").concat(t.name)),t):(("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&c.c.log("[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = ".concat(Number(a),")")),t)):(("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&c.c.log("[Tracing] Discarding transaction because ".concat("function"===typeof e.tracesSampler?"tracesSampler returned 0 or false":"a negative sampling decision was inherited or tracesSampleRate is set to 0")),t.sampled=!1,t):(("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&c.c.warn("[Tracing] Discarding transaction because of invalid sample rate."),t.sampled=!1,t)):(t.sampled=!1,t);var a}function h(t,e){var n=this.getClient(),a=n&&n.getOptions()||{},r=new _.a(t,this);return(r=f(r,a,Object(i.a)({parentSampled:t.parentSampled,transactionContext:t},e))).sampled&&r.initSpanRecorder(a._experiments&&a._experiments.maxSpans),r}function m(t,e,n,a,r,c){var o=t.getClient(),s=o&&o.getOptions()||{},u=new d.c(e,t,n,a,r);return(u=f(u,s,Object(i.a)({parentSampled:e.parentSampled,transactionContext:e},c))).sampled&&u.initSpanRecorder(s._experiments&&s._experiments.maxSpans),u}function g(){!function(){var t=Object(r.d)();t.__SENTRY__&&(t.__SENTRY__.extensions=t.__SENTRY__.extensions||{},t.__SENTRY__.extensions.startTransaction||(t.__SENTRY__.extensions.startTransaction=h),t.__SENTRY__.extensions.traceHeaders||(t.__SENTRY__.extensions.traceHeaders=p))}(),Object(s.b)()&&function(){var e=Object(r.d)();if(e.__SENTRY__){var n={mongodb:function(){return new(Object(s.a)(t,"./integrations/node/mongo").Mongo)},mongoose:function(){return new(Object(s.a)(t,"./integrations/node/mongo").Mongo)({mongoose:!0})},mysql:function(){return new(Object(s.a)(t,"./integrations/node/mysql").Mysql)},pg:function(){return new(Object(s.a)(t,"./integrations/node/postgres").Postgres)}},i=Object.keys(n).filter((function(t){return!!Object(s.c)(t)})).map((function(t){try{return n[t]()}catch(e){return}})).filter((function(t){return t}));i.length>0&&(e.__SENTRY__.integrations=[].concat(Object(a.a)(e.__SENTRY__.integrations||[]),Object(a.a)(i)))}}(),Object(u.a)()}}).call(this,n(102)(t))},208:function(t,e,n){"use strict";n.d(e,"a",(function(){return p})),n.d(e,"b",(function(){return l})),n.d(e,"c",(function(){return f}));var a=n(15),i=n(3),r=n(17),c=n(20),o=n(1115),s=n(38),u=n(80),d=n(21),_=n(23),l=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3;Object(r.a)(this,t),t.prototype.__init.call(this),this._maxlen=e}return Object(c.a)(t,[{key:"__init",value:function(){this.spans=[]}},{key:"add",value:function(t){this.spans.length>this._maxlen?t.spanRecorder=void 0:this.spans.push(t)}}]),t}(),p=function(){function t(e){if(Object(r.a)(this,t),t.prototype.__init2.call(this),t.prototype.__init3.call(this),t.prototype.__init4.call(this),t.prototype.__init5.call(this),t.prototype.__init6.call(this),!e)return this;e.traceId&&(this.traceId=e.traceId),e.spanId&&(this.spanId=e.spanId),e.parentSpanId&&(this.parentSpanId=e.parentSpanId),"sampled"in e&&(this.sampled=e.sampled),e.op&&(this.op=e.op),e.description&&(this.description=e.description),e.data&&(this.data=e.data),e.tags&&(this.tags=e.tags),e.status&&(this.status=e.status),e.startTimestamp&&(this.startTimestamp=e.startTimestamp),e.endTimestamp&&(this.endTimestamp=e.endTimestamp)}return Object(c.a)(t,[{key:"__init2",value:function(){this.traceId=Object(s.e)()}},{key:"__init3",value:function(){this.spanId=Object(s.e)().substring(16)}},{key:"__init4",value:function(){this.startTimestamp=Object(u.d)()}},{key:"__init5",value:function(){this.tags={}}},{key:"__init6",value:function(){this.data={}}},{key:"startChild",value:function(e){var n=new t(Object(i.a)(Object(i.a)({},e),{},{parentSpanId:this.spanId,sampled:this.sampled,traceId:this.traceId}));if(n.spanRecorder=this.spanRecorder,n.spanRecorder&&n.spanRecorder.add(n),n.transaction=this.transaction,("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&n.transaction){var a=e&&e.op||"< unknown op >",r=n.transaction.name||"< unknown name >",c=n.transaction.spanId,o="[Tracing] Starting '".concat(a,"' span on transaction '").concat(r,"' (").concat(c,").");n.transaction.metadata.spanMetadata[n.spanId]={logMessage:o},d.c.log(o)}return n}},{key:"setTag",value:function(t,e){return this.tags=Object(i.a)(Object(i.a)({},this.tags),{},Object(a.a)({},t,e)),this}},{key:"setData",value:function(t,e){return this.data=Object(i.a)(Object(i.a)({},this.data),{},Object(a.a)({},t,e)),this}},{key:"setStatus",value:function(t){return this.status=t,this}},{key:"setHttpStatus",value:function(t){this.setTag("http.status_code",String(t));var e=f(t);return"unknown_error"!==e&&this.setStatus(e),this}},{key:"isSuccess",value:function(){return"ok"===this.status}},{key:"finish",value:function(t){if(("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&this.transaction&&this.transaction.spanId!==this.spanId){var e=this.transaction.metadata.spanMetadata[this.spanId].logMessage;e&&d.c.log(e.replace("Starting","Finishing"))}this.endTimestamp="number"===typeof t?t:Object(u.d)()}},{key:"toTraceparent",value:function(){var t="";return void 0!==this.sampled&&(t=this.sampled?"-1":"-0"),"".concat(this.traceId,"-").concat(this.spanId).concat(t)}},{key:"toContext",value:function(){return Object(_.c)({data:this.data,description:this.description,endTimestamp:this.endTimestamp,op:this.op,parentSpanId:this.parentSpanId,sampled:this.sampled,spanId:this.spanId,startTimestamp:this.startTimestamp,status:this.status,tags:this.tags,traceId:this.traceId})}},{key:"updateWithContext",value:function(t){var e=this;return this.data=Object(o.a)(t.data,(function(){return{}})),this.description=t.description,this.endTimestamp=t.endTimestamp,this.op=t.op,this.parentSpanId=t.parentSpanId,this.sampled=t.sampled,this.spanId=Object(o.a)(t.spanId,(function(){return e.spanId})),this.startTimestamp=Object(o.a)(t.startTimestamp,(function(){return e.startTimestamp})),this.status=t.status,this.tags=Object(o.a)(t.tags,(function(){return{}})),this.traceId=Object(o.a)(t.traceId,(function(){return e.traceId})),this}},{key:"getTraceContext",value:function(){return Object(_.c)({data:Object.keys(this.data).length>0?this.data:void 0,description:this.description,op:this.op,parent_span_id:this.parentSpanId,span_id:this.spanId,status:this.status,tags:Object.keys(this.tags).length>0?this.tags:void 0,trace_id:this.traceId})}},{key:"toJSON",value:function(){return Object(_.c)({data:Object.keys(this.data).length>0?this.data:void 0,description:this.description,op:this.op,parent_span_id:this.parentSpanId,span_id:this.spanId,start_timestamp:this.startTimestamp,status:this.status,tags:Object.keys(this.tags).length>0?this.tags:void 0,timestamp:this.endTimestamp,trace_id:this.traceId})}}]),t}();function f(t){if(t<400&&t>=100)return"ok";if(t>=400&&t<500)switch(t){case 401:return"unauthenticated";case 403:return"permission_denied";case 404:return"not_found";case 409:return"already_exists";case 413:return"failed_precondition";case 429:return"resource_exhausted";default:return"invalid_argument"}if(t>=500&&t<600)switch(t){case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline_exceeded";default:return"internal_error"}return"unknown_error"}},209:function(t,e,n){"use strict";n.d(e,"a",(function(){return g}));var a=n(3),i=n(17),r=n(20),c=n(65),o=n(103),s=n(55),u=n(53),d=n(54),_=n(1115),l=n(27),p=n(21),f=n(23),h=n(201),m=n(208),g=function(t){Object(u.a)(n,t);var e=Object(d.a)(n);function n(t,r){var o;return Object(i.a)(this,n),o=e.call(this,t),n.prototype.__init.call(Object(c.a)(o)),o._hub=r||Object(l.b)(),o._name=t.name||"",o.metadata=Object(a.a)(Object(a.a)({},t.metadata),{},{spanMetadata:{}}),o._trimEnd=t.trimEnd,o.transaction=Object(c.a)(o),o}return Object(r.a)(n,[{key:"__init",value:function(){this._measurements={}}},{key:"name",get:function(){return this._name},set:function(t){this._name=t,this.metadata.source="custom"}},{key:"setName",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"custom";this.name=t,this.metadata.source=e}},{key:"initSpanRecorder",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3;this.spanRecorder||(this.spanRecorder=new m.b(t)),this.spanRecorder.add(this)}},{key:"setMeasurement",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";this._measurements[t]={value:e,unit:n}}},{key:"setMetadata",value:function(t){this.metadata=Object(a.a)(Object(a.a)({},this.metadata),t)}},{key:"finish",value:function(t){var e=this;if(void 0===this.endTimestamp){if(this.name||(("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&p.c.warn("Transaction has no name, falling back to `<unlabeled transaction>`."),this.name="<unlabeled transaction>"),Object(o.a)(Object(s.a)(n.prototype),"finish",this).call(this,t),!0===this.sampled){var i=this.spanRecorder?this.spanRecorder.spans.filter((function(t){return t!==e&&t.endTimestamp})):[];this._trimEnd&&i.length>0&&(this.endTimestamp=i.reduce((function(t,e){return t.endTimestamp&&e.endTimestamp?t.endTimestamp>e.endTimestamp?t:e:t})).endTimestamp);var r=this.metadata,c=Object(a.a)({contexts:{trace:this.getTraceContext()},spans:i,start_timestamp:this.startTimestamp,tags:this.tags,timestamp:this.endTimestamp,transaction:this.name,type:"transaction",sdkProcessingMetadata:Object(a.a)(Object(a.a)({},r),{},{baggage:this.getBaggage()})},r.source&&{transaction_info:{source:r.source}});return Object.keys(this._measurements).length>0&&(("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&p.c.log("[Measurements] Adding measurements to transaction",JSON.stringify(this._measurements,void 0,2)),c.measurements=this._measurements),("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&p.c.log("[Tracing] Finishing ".concat(this.op," transaction: ").concat(this.name,".")),this._hub.captureEvent(c)}("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&p.c.log("[Tracing] Discarding transaction because its trace was not chosen to be sampled.");var u=this._hub.getClient();u&&u.recordDroppedEvent("sample_rate","transaction")}}},{key:"toContext",value:function(){var t=Object(o.a)(Object(s.a)(n.prototype),"toContext",this).call(this);return Object(f.c)(Object(a.a)(Object(a.a)({},t),{},{name:this.name,trimEnd:this._trimEnd}))}},{key:"updateWithContext",value:function(t){return Object(o.a)(Object(s.a)(n.prototype),"updateWithContext",this).call(this,t),this.name=Object(_.a)(t.name,(function(){return""})),this._trimEnd=t.trimEnd,this}},{key:"getBaggage",value:function(){var t=this.metadata.baggage,e=!t||Object(h.d)(t)?this._populateBaggageWithSentryValues(t):t;return this.metadata.baggage=e,e}},{key:"_populateBaggageWithSentryValues",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(h.b)({}),e=this._hub||Object(l.b)(),n=e&&e.getClient();if(!n)return t;var i=n.getOptions()||{},r=i.environment,c=i.release,o=n.getDsn()||{},s=o.publicKey,u=this.metadata&&this.metadata.transactionSampling&&this.metadata.transactionSampling.rate&&this.metadata.transactionSampling.rate.toString(),d=e.getScope(),_=d&&d.getUser()||{},p=_.segment,m=this.metadata.source,g=m&&"url"!==m?this.name:void 0;return Object(h.b)(Object(f.c)(Object(a.a)({environment:r,release:c,transaction:g,user_segment:p,public_key:s,trace_id:this.traceId,sample_rate:u},Object(h.c)(t))),"",!1)}}]),n}(m.a)},210:function(t,e,n){"use strict";n.d(e,"a",(function(){return m})),n.d(e,"b",(function(){return h})),n.d(e,"c",(function(){return b}));var a=n(41),i=n(65),r=n(17),c=n(20),o=n(103),s=n(55),u=n(53),d=n(54),_=n(80),l=n(21),p=n(208),f=n(209),h=1e3,m=3e4,g=function(t){Object(u.a)(n,t);var e=Object(d.a)(n);function n(t,a,i,c){var o;return Object(r.a)(this,n),(o=e.call(this,c))._pushActivity=t,o._popActivity=a,o.transactionSpanId=i,o}return Object(c.a)(n,[{key:"add",value:function(t){var e=this;t.spanId!==this.transactionSpanId&&(t.finish=function(n){t.endTimestamp="number"===typeof n?n:Object(_.d)(),e._popActivity(t.spanId)},void 0===t.endTimestamp&&this._pushActivity(t.spanId)),Object(o.a)(Object(s.a)(n.prototype),"add",this).call(this,t)}}]),n}(p.b),b=function(t){Object(u.a)(n,t);var e=Object(d.a)(n);function n(t,a){var c,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:h,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:m,u=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return Object(r.a)(this,n),(c=e.call(this,t,a))._idleHub=a,c._idleTimeout=o,c._finalTimeout=s,c._onScope=u,n.prototype.__init.call(Object(i.a)(c)),n.prototype.__init2.call(Object(i.a)(c)),n.prototype.__init3.call(Object(i.a)(c)),n.prototype.__init4.call(Object(i.a)(c)),u&&(v(a),("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&l.c.log("Setting idle transaction on scope. Span ID: ".concat(c.spanId)),a.configureScope((function(t){return t.setSpan(Object(i.a)(c))}))),c._startIdleTimeout(),setTimeout((function(){c._finished||(c.setStatus("deadline_exceeded"),c.finish())}),c._finalTimeout),c}return Object(c.a)(n,[{key:"__init",value:function(){this.activities={}}},{key:"__init2",value:function(){this._heartbeatCounter=0}},{key:"__init3",value:function(){this._finished=!1}},{key:"__init4",value:function(){this._beforeFinishCallbacks=[]}},{key:"finish",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(_.d)();if(this._finished=!0,this.activities={},this.spanRecorder){("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&l.c.log("[Tracing] finishing IdleTransaction",new Date(1e3*e).toISOString(),this.op);var i,r=Object(a.a)(this._beforeFinishCallbacks);try{for(r.s();!(i=r.n()).done;){var c=i.value;c(this,e)}}catch(u){r.e(u)}finally{r.f()}this.spanRecorder.spans=this.spanRecorder.spans.filter((function(n){if(n.spanId===t.spanId)return!0;n.endTimestamp||(n.endTimestamp=e,n.setStatus("cancelled"),("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&l.c.log("[Tracing] cancelling span since transaction ended early",JSON.stringify(n,void 0,2)));var a=n.startTimestamp<e;return a||("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&l.c.log("[Tracing] discarding Span since it happened after Transaction was finished",JSON.stringify(n,void 0,2)),a})),("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&l.c.log("[Tracing] flushing IdleTransaction")}else("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&l.c.log("[Tracing] No active IdleTransaction");return this._onScope&&v(this._idleHub),Object(o.a)(Object(s.a)(n.prototype),"finish",this).call(this,e)}},{key:"registerBeforeFinishCallback",value:function(t){this._beforeFinishCallbacks.push(t)}},{key:"initSpanRecorder",value:function(t){var e=this;if(!this.spanRecorder){this.spanRecorder=new g((function(t){e._finished||e._pushActivity(t)}),(function(t){e._finished||e._popActivity(t)}),this.spanId,t),("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&l.c.log("Starting heartbeat"),this._pingHeartbeat()}this.spanRecorder.add(this)}},{key:"_cancelIdleTimeout",value:function(){this._idleTimeoutID&&(clearTimeout(this._idleTimeoutID),this._idleTimeoutID=void 0)}},{key:"_startIdleTimeout",value:function(t){var e=this;this._cancelIdleTimeout(),this._idleTimeoutID=setTimeout((function(){e._finished||0!==Object.keys(e.activities).length||e.finish(t)}),this._idleTimeout)}},{key:"_pushActivity",value:function(t){this._cancelIdleTimeout(),("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&l.c.log("[Tracing] pushActivity: ".concat(t)),this.activities[t]=!0,("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&l.c.log("[Tracing] new activities count",Object.keys(this.activities).length)}},{key:"_popActivity",value:function(t){if(this.activities[t]&&(("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&l.c.log("[Tracing] popActivity ".concat(t)),delete this.activities[t],("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&l.c.log("[Tracing] new activities count",Object.keys(this.activities).length)),0===Object.keys(this.activities).length){var e=Object(_.d)()+this._idleTimeout/1e3;this._startIdleTimeout(e)}}},{key:"_beat",value:function(){if(!this._finished){var t=Object.keys(this.activities).join("");t===this._prevHeartbeatString?this._heartbeatCounter+=1:this._heartbeatCounter=1,this._prevHeartbeatString=t,this._heartbeatCounter>=3?(("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&l.c.log("[Tracing] Transaction finished because of no change for 3 heart beats"),this.setStatus("deadline_exceeded"),this.finish()):this._pingHeartbeat()}}},{key:"_pingHeartbeat",value:function(){var t=this;("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&l.c.log("pinging Heartbeat -> current counter: ".concat(this._heartbeatCounter)),setTimeout((function(){t._beat()}),5e3)}}]),n}(f.a);function v(t){var e=t.getScope();e&&(e.getTransaction()&&e.setSpan(void 0))}},215:function(t,e,n){"use strict";n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return i}));var a=new RegExp("^[ \\t]*([0-9a-f]{32})?-?([0-9a-f]{16})?-?([01])?[ \\t]*$");function i(t){var e,n=t.match(a);if(n)return"1"===n[3]?e=!0:"0"===n[3]&&(e=!1),{traceId:n[1],parentSampled:e,parentSpanId:n[2]}}},657:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var a=n(113),i=n(21),r=n(204);function c(){Object(a.a)("error",o),Object(a.a)("unhandledrejection",o)}function o(){var t=Object(r.a)();if(t){var e="internal_error";("undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&i.c.log("[Tracing] Transaction: ".concat(e," -> Global error occured")),t.setStatus(e)}}}}]);